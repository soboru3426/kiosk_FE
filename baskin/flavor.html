<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í”Œë ˆì´ë²„ ì„ íƒ</title>
  <link rel="stylesheet" href="common.css">
  <style>
    /* --- ê¸°ë³¸ ì»¨í…Œì´ë„ˆ ë° ë ˆì´ì•„ì›ƒ --- */
    .container {
  width: 640px;
  background: #fff;
  padding: 20px 40px;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;

  min-height: 678px;  /* â† ë³€ê²½ */
  height: auto;       /* â† ë†’ì´ ê³ ì • ì œê±° */
}
    header.header {
      
      text-align: center;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    header.header h2 {
      font-size: 28px;
      color: #333;
      margin: 0;
    }
    .tab-buttons {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      width: 100%;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
    }
    .tab-buttons button {
      flex: 1;
      padding: 20px 0;
      font-size: 18px;
      background: #eee;
      color: #aaa;
      border: none;
      cursor: pointer;
    }

    .tab-buttons button:hover {
      color: #ff1493;
    }
    .tab-buttons button.active {
      background: #fff;
      color: #ff1493;
      font-weight: bold;
    }
    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    .tab-content.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .product-info {
      text-align: center;
      margin-bottom: 30px;
    }
    #product-img {
      width: 70px;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .product-my {
      display: flex;
      gap: 50px;
      justify-content: center;
      align-items: center;
    }
    #product-price {
      margin-left: 300px;
      font-size: 30px;
      color: #ff1493;
    }
    .product-info h3 {
      font-size: 22px;
      margin: 10px 0 5px;
      color: #333;
    }
    .product-info p {
      font-size: 16px;
      color: #666;
      margin: 5px 0;
    }
    
    /* --- ì˜µì…˜(ë§› ì„ íƒ) ì˜ì—­ --- */
    .selection {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
    }
    .option {
      width: 150px;
      height: 150px;
      background: white;
      border: 2px solid #ddd;
      border-radius: 10px;
      text-align: center;
      padding: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .option img {
      width: 55px;
      height: 55px;
      margin-bottom: 25px;
    }
    .option p {
      font-size: 13px;
      margin: 3px 0;
    }
    .selection .option:hover {
      background: #f5eff3;
      border: 2px solid #f85bc9;
    }
    
    /* --- ë§› ì„ íƒ ìŠ¬ë¡¯ ì˜ì—­ --- */
    .flavor-slots-container {
      display: flex;
      justify-content: flex-start;
      gap: 10px;
      margin: 40px auto 20px; /* ğŸ”¼ ê¸°ì¡´ 20px â†’ 40px ìœ¼ë¡œ ìˆ˜ì • */
      max-width: 600px;
    }



    .flavor-slot {
      width: 80px;
      height: 80px;
      border: 2px solid #ff1493; /* ê¸°ì¡´: dashed â†’ solid, ìƒ‰ìƒ ë³€ê²½ */
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: border 0.3s ease;
    }

    .flavor-slot.active {
      border: 3px solid #ff1493; /* í™œì„±í™”ëœ ìŠ¬ë¡¯ì€ ì¢€ ë” êµµê²Œ ê°•ì¡° */
    }
    .flavor-slot img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
    .slot-placeholder {
      font-size: 30px;
      color: #ccc;
    }
    
    /* --- í”Œë ˆì´ë²„(ë§› ì˜µì…˜) ê·¸ë¦¬ë“œ --- */
    #flavorTab {
      background: #fafafa;
      padding: 20px;
    }
    .flavor-panels {
      position: relative;
      height: 500px; /* ë” ì‘ê²Œ */
      overflow-y: auto;
      margin-bottom: 10px;
    }

    .flavor-panel {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      display: none;
    }
    .flavor-panel.active {
      display: block;
    }
    .flavor-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* 3ì—´ë¡œ ì¶•ì†Œ */
      gap: 10px;
    }
    .flavor-grid img {
      max-width: 150px;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      border: 2px #ff1493;
      transition: border 0.3s, transform 0.3s;
    }
    .flavor-grid img:hover {
      transform: scale(1.05);
    }
    .flavor-grid img.selected {
      border: 2px solid #ff1493;
    }
    
    /* --- í˜ì´ì§€ë„¤ì´ì…˜ (ìˆ«ì ì—†ì´ ì›í˜• ì¸ë””ì¼€ì´í„°) --- */
    .pagination {
      text-align: center;
      margin-top: 40px;
    }
    .pagination button {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      border: none;
      background: #ccc;
      margin: 0 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .pagination button.active {
      background: #ff1493;
    }
    
    /* --- í•˜ë‹¨ ì˜ì—­ (í•©ê³„ ê°€ê²© ë° ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼) --- */
    .bottom-actions {
  margin-top: auto; /* ì•„ë˜ë¡œ ë°€ë¦¼ */
  padding-bottom: 30px;
}


    .quantity-price {
      display: flex;
      align-items: center;
      gap: 20px;
      font-size: 18px;
      color: #333;
    }
    .quantity-price button {
      padding: 8px 12px;
      font-size: 18px;
      border: none;
      background: #ff1493;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .quantity-price button:hover {
      background: #ff007f;
    }
    .navigation-buttons {
      display: flex;
      justify-content: center;
      gap: 30px;
    }
    /* ì´ì „ ë²„íŠ¼ */
    .btn-back {
      background-color: white;
      padding: 10px;
      font-size: 20px;
      color: #ff1493;
      border-radius: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 200px;
      height: 60px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn-back:hover {
      color: #ff007f;
      background-color: rgb(235,232,232);
    }
    /* ë‹´ê¸° ë²„íŠ¼ */
    .btn-cart {
      background-color: #ff1493;
      color: white;
      font-size: 18px;
      width: 200px;
      height: 60px;
      padding: 10px;
      border-radius: 60px;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn-cart:hover {
      background-color: #ff007f;
    }
    
    #gob {
      margin-top: 20px;
      margin-bottom: 20px;
      font-size: 16px;
      color: red;
      text-align: center;
    }
    /* ì˜ˆ: style.css ë˜ëŠ” <style>ì— ì¶”ê°€ */
.flavor-zoom-anim {
  transform: scale(1.2);
  transition: transform 0.3s ease;
}
.flavor-item img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 10px;
}


.flavor-item img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 10px;
}

.flavor-item p {
  font-size: 11px;
  margin-top: 3px;
}

  </style>
</head>
<body>  
  <div class="container">
    <header class="header">
      <div class="tab-buttons">
        <button id="tabProduct" class="active" onclick="showTab('productTab')">ìƒí’ˆ ì •ë³´</button>
        <button id="tabFlavor" onclick="showTab('flavorTab')">í”Œë ˆì´ë²„</button>
      </div>
    </header>

    <!-- ìƒí’ˆ ì •ë³´ íƒ­ -->
    <div id="productTab" class="tab-content active">
      <div class="product-info">
        <div class="product-my">
          <img id="product-img" src="images/pd_cup.png" alt="ìƒí’ˆ ì´ë¯¸ì§€">
          <h3 id="product-name">ìƒí’ˆëª…</h3>
          <p id="product-price">â‚©3200</p>
        </div>
        <p>ì›í•˜ëŠ” ë§›ì„ ììœ ë¡­ê²Œ ì„ íƒí•˜ì„¸ìš”!</p>
        <p id="gob">** ë³¸ ì œí’ˆì€ í¬ì¥ì´ ë¶ˆê°€í•©ë‹ˆë‹¤ **</p>
        
        <!-- ì˜µì…˜ ì„ íƒ ì˜ì—­ (ì˜µì…˜ ì„ íƒ ê°€ëŠ¥í•œ ì œí’ˆì¼ ë•Œ) -->
        <div class="selection">
          <div class="option selected" onclick="selectOption('cup')">
            <img src="images/pd_cup.png" alt="ì»µ ì´ë¯¸ì§€">
            <p>ì»µ(í¬ì¥ë¶ˆê°€)</p>
            <div class="quantity-price">
              <button onclick="changeQuantityForOption(-1, 'cup'); event.stopPropagation();">-</button>
              <span id="finalQuantity-cup">0</span>
              <button onclick="changeQuantityForOption(1, 'cup'); event.stopPropagation();">+</button>
            </div>
          </div>
          <div class="option" onclick="selectOption('cone')">
            <img src="images/pd_corn.png" alt="ì½˜ ì´ë¯¸ì§€">
            <p>ì½˜(í¬ì¥ë¶ˆê°€)</p>
            <div class="quantity-price">
              <button onclick="changeQuantityForOption(-1, 'cone'); event.stopPropagation();">-</button>
              <span id="finalQuantity-cone">0</span>
              <button onclick="changeQuantityForOption(1, 'cone'); event.stopPropagation();">+</button>
            </div>
          </div>
          <div class="option" onclick="selectOption('waffle')">
            <img src="images/pd_corn.png" alt="ì™€í”Œ ì´ë¯¸ì§€">
            <p>ì™€í”Œì½˜(í¬ì¥ë¶ˆê°€)</p>
            <div class="quantity-price">
              <button onclick="changeQuantityForOption(-1, 'waffle'); event.stopPropagation();">-</button>
              <span id="finalQuantity-waffle">0</span>
              <button onclick="changeQuantityForOption(1, 'waffle'); event.stopPropagation();">+</button>
            </div>
          </div>
        </div>
        
        <!-- ì˜µì…˜ ì„ íƒ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì— í‘œì‹œí•  ìˆ˜ëŸ‰ ì¡°ì ˆ ì˜ì—­ -->
        <div class="no-option-quantity" style="display: none;">
          <p>** ë³¸ ìƒí’ˆì€ ì»µ, ì½˜, ì™€í”Œ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì…ë‹ˆë‹¤. **</p>
          <div class="quantity-container">
            <button onclick="changeProductQuantity(-1)">-</button>
            <span id="noOptionQuantity">0</span>
            <button onclick="changeProductQuantity(1)">+</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- í”Œë ˆì´ë²„ íƒ­ -->
    <div id="flavorTab" class="tab-content">
      <!-- ë§› ì„ íƒ ìŠ¬ë¡¯ë“¤ (ë™ì ìœ¼ë¡œ ìƒì„±ë¨) -->
      
      <div class="flavor-panels">
        <div class="flavor-panel active" id="flavorPanel1">
          <h3>í”Œë ˆì´ë²„ 1í˜ì´ì§€</h3>
          <div class="flavor-grid">
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor1.png" alt="ì†Œê¸ˆ ìš°ìœ  ì•„ì´ìŠ¤í¬ë¦¼">
              <p>ì†Œê¸ˆ ìš°ìœ  ì•„ì´ìŠ¤í¬ë¦¼</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor2.png" alt="ê·¸ë¦°í‹°">
              <p>ê·¸ë¦°í‹°</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor3.png" alt="ë‚˜ì£¼ë°° ì†Œë¥´ë² ">
              <p>ë‚˜ì£¼ë°° ì†Œë¥´ë² </p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor4.png" alt="ë„ˆëŠ” ì°¸ ë‹¬ê³ ë‚˜">
              <p>ë„ˆëŠ” ì°¸ ë‹¬ê³ ë‚˜</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor5.png" alt="ë‰´ìš•ì¹˜ì¦ˆì¼€ì´í¬">
              <p>ë‰´ìš•ì¹˜ì¦ˆì¼€ì´í¬</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor6.png" alt="ë”¸ê¸°ì—°ìœ íë‹¹">
              <p>ë”¸ê¸°ì—°ìœ íë‹¹</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor7.png" alt="ë ˆì¸ë³´ìš°ìƒ¤ë² íŠ¸">
              <p>ë ˆì¸ë³´ìš°ìƒ¤ë² íŠ¸</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor8.png" alt="ë§ë‘ê¿€ë–¡ëª¨ì°Œ">
              <p>ë§ë‘ê¿€ë–¡ëª¨ì°Œ</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor9.png" alt="ë¯¼íŠ¸ì´ˆì½”">
              <p>ë¯¼íŠ¸ì´ˆì½”</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor10.png" alt="ë°”ëŒê³¼ í•¨ê»˜ ì‚¬ë¼ì§€ë‹¤">
              <p>ë°”ëŒê³¼ í•¨ê»˜ ì‚¬ë¼ì§€ë‹¤</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor11.png" alt="ë² ë¦¬ë² ë¦¬ ìŠ¤íŠ¸ë¡œë² ë¦¬">
              <p>ë² ë¦¬ë² ë¦¬ ìŠ¤íŠ¸ë¡œë² ë¦¬</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor12.png" alt="ë´‰ì¥¬ë¥´ ë§ˆì¹´ë¡±">
              <p>ë´‰ì¥¬ë¥´ ë§ˆì¹´ë¡±</p>
            </div>
          </div>
        </div>
        
        <div class="flavor-panel" id="flavorPanel2">
          <h3>í”Œë ˆì´ë²„ 2í˜ì´ì§€</h3>
          <div class="flavor-grid">
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor13.png" alt="ë¸”ë£¨ë² ë¦¬ íŒŒë‚˜ì½”íƒ€">
              <p>ë¸”ë£¨ë² ë¦¬ íŒŒë‚˜ì½”íƒ€</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor14.png" alt="ì‚¬ë‘ì— ë¹ ì§„ ë”¸ê¸°">
              <p>ì‚¬ë‘ì— ë¹ ì§„ ë”¸ê¸°</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor15.png" alt="ìŠˆíŒ…ìŠ¤íƒ€">
              <p>ìŠˆíŒ…ìŠ¤íƒ€</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor16.png" alt="ì•„ëª¬ë“œ ë´‰ë´‰">
              <p>ì•„ëª¬ë“œ ë´‰ë´‰</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor17.png" alt="ì•„ì´ìŠ¤ ë„ì¿„ë°”ë‚˜ë‚˜">
              <p>ì•„ì´ìŠ¤ ë„ì¿„ë°”ë‚˜ë‚˜</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor18.png" alt="ì•„ì´ìŠ¤ í˜¸ë–¡">
              <p>ì•„ì´ìŠ¤ í˜¸ë–¡</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor19.png" alt="ì•„ì´ìŠ¤ì´ˆì½”ë„ì¿„ë°”ë‚˜ë‚˜">
              <p>ì•„ì´ìŠ¤ì´ˆì½”ë„ì¿„ë°”ë‚˜ë‚˜</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor20.png" alt="ì• í”Œë¯¼íŠ¸">
              <p>ì• í”Œë¯¼íŠ¸</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor21.png" alt="ì—„ë§ˆëŠ” ì™¸ê³„ì¸">
              <p>ì—„ë§ˆëŠ” ì™¸ê³„ì¸</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor22.png" alt="ì—ìŠ¤í”„ë ˆì†Œ ì•¤ í¬ë¦¼">
              <p>ì—ìŠ¤í”„ë ˆì†Œ ì•¤ í¬ë¦¼</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor23.png" alt="ì˜¤ë ˆì˜¤ ì¿ í‚¤ ì•¤ í¬ë¦¼">
              <p>ì˜¤ë ˆì˜¤ ì¿ í‚¤ ì•¤ í¬ë¦¼</p>
            </div>
            <div class="flavor-item" onclick="selectFlavor(this)">
              <img src="images/flavor24.png" alt="ì´ìƒí•œ ë‚˜ë¼ì˜ ì†œì‚¬íƒ•">
              <p>ì´ìƒí•œ ë‚˜ë¼ì˜ ì†œì‚¬íƒ•</p>
            </div>
          </div>
        </div>
        
      </div>
      
      <div class="pagination">
        <button onclick="showFlavorPanel(1)" data-page="1"></button>
        <button onclick="showFlavorPanel(2)" data-page="2"></button>
      </div>
      <div class="flavor-slots-container"></div>
    </div>

    <!-- í•˜ë‹¨ ì˜ì—­ -->
    <div class="bottom-actions">
      <div class="quantity-price">
        <p style="display: none; margin: 0;"><span id="totalPrice"></span></p>
      </div>
      <div class="navigation-buttons">
        <button onclick="goBackToTestPage()" class="btn-back">ì´ì „</button>
        <button onclick="saveOrderData()" class="btn-cart">ë‹´ê¸°</button>
      </div>
    </div>
  </div>
  
  <script>
    // ì „ì—­ ê°ì²´: ì„ íƒëœ ì˜µì…˜, ìˆ˜ëŸ‰, ë§›, ë‹¨ê°€, ê·¸ë¦¬ê³  ì„ íƒëœ ë§› ë°°ì—´
// ì „ì—­ ê°ì²´: ì„ íƒëœ ì˜µì…˜, ìˆ˜ëŸ‰, ë§›, ë‹¨ê°€, ê·¸ë¦¬ê³  ì„ íƒëœ ë§› ë°°ì—´
// ì „ì—­ ê°ì²´: ì„ íƒëœ ì˜µì…˜, ìˆ˜ëŸ‰, ë§›, ë‹¨ê°€, ê·¸ë¦¬ê³  ì„ íƒëœ ë§› ë°°ì—´
// ì „ì—­ ê°ì²´: ì„ íƒëœ ì˜µì…˜, ìˆ˜ëŸ‰, ë§›, ë‹¨ê°€, ê·¸ë¦¬ê³  ì„ íƒëœ ë§› ë°°ì—´
var orderData = {
  cupQuantity: 0,
  coneQuantity: 0,
  waffleQuantity: 0,
  noOptionQuantity: 1, 
  price: 3200,
  totalQuantity: 0,
  optionType: null,
  flavor: null,
  maxFlavors: 3,
  selectedFlavors: [],
  name: ''
};
let visitedFlavorTab = false; // ğŸ‘ˆ ìµœì´ˆ ì§„ì… ì‹œ false


var activeFlavorSlotIndex = 0; // í˜„ì¬ í™œì„±í™”ëœ ë§› ìŠ¬ë¡¯ ì¸ë±ìŠ¤

document.addEventListener("DOMContentLoaded", function () {
  // í—¤ë” ë™ì  ì‚½ì… (header.htmlì— ìƒë‹¨ë°” ë””ìì¸ í¬í•¨)
  fetch("header.html")
    .then(response => response.text())
    .then(data => {
      const headerContainer = document.getElementById("header-container");
      if (headerContainer) {
        headerContainer.innerHTML = data;
      }
      document.querySelector(".btn-cart").textContent = "í”Œë ˆì´ë²„(ë§›) ì„ íƒ";
      document.querySelector(".btn-cart").setAttribute("onclick", "checkBeforeFlavorTab()");
    });
        const coneOption = document.querySelector(".option[onclick*='cone']");
    const waffleOption = document.querySelector(".option[onclick*='waffle']");
    const selectionDiv = document.querySelector('.selection');
    const noOptionDiv = document.querySelector('.no-option-quantity');
  // í‘¸í„° ë™ì  ì‚½ì… (í•„ìš” ì‹œ footer.html ì‚¬ìš©)
  fetch("footer.html")
  .then(response => response.text())
  .then(data => {
    const footerContainer = document.getElementById("footer-container");
    if (footerContainer) {
      footerContainer.innerHTML = data;

      // ë²„íŠ¼ì´ DOMì— ì‚½ì…ëœ ì´í›„ì— ì´ë²¤íŠ¸ ë°”ì¸ë”©í•´ì•¼ í•¨!
      const cartBtn = footerContainer.querySelector(".btn-cart");
      if (cartBtn) {
        cartBtn.textContent = "í”Œë ˆì´ë²„(ë§›) ì„ íƒ";
        cartBtn.onclick = checkBeforeFlavorTab;
      }
    }
  });

  // ë‹«ê¸° ë²„íŠ¼ ë™ì‘ ì¶”ê°€ (headerì˜ X ë²„íŠ¼)
  document.addEventListener("click", function (event) {
    if (event.target.classList.contains("close-btn")) {
      window.location.href = "kiosk1.html";
    }
  });

  // URL íŒŒë¼ë¯¸í„°ì—ì„œ ìƒí’ˆëª…, ê°€ê²© ì €ì¥
  const params = new URLSearchParams(window.location.search);
  const name = params.get("name");
  const price = params.get("price");
  if (name) {
    document.getElementById("product-name").textContent = name;
    orderData.name = name;
    updateOptionButtons();
    // ì œí’ˆëª…ì— ë”°ë¼ ë§› ì„ íƒ ìŠ¬ë¡¯ ê°œìˆ˜ë¥¼ ê²°ì •
    if (name === "ì‹±ê¸€ë ˆê·¤ëŸ¬" || name === "ì‹±ê¸€í‚¹") {
      orderData.maxFlavors = 1;
    } else if (name === "ë”ë¸”ì£¼ë‹ˆì–´" || name === "ë”ë¸”ë ˆê·¤ëŸ¬") {
      orderData.maxFlavors = 2;
    } else if (name === "íŒŒì¸íŠ¸") {
      orderData.maxFlavors = 3;
    } else if (name === "ì¿¼í„°") {
      orderData.maxFlavors = 4;
    } else if (name === "íŒ¨ë°€ë¦¬") {
      orderData.maxFlavors = 5;
    } else if (name === "í•˜í”„ê°¤ëŸ°") {
      orderData.maxFlavors = 6;
    } else {
      orderData.maxFlavors = 3; // ê¸°ë³¸ê°’
    }
  }
  if (price) {
    const parsedPrice = parseInt(price, 10);
    document.getElementById("product-price").textContent = `â‚©${parsedPrice.toLocaleString('ko-KR')}`;
    orderData.price = parsedPrice; // ë‹¨ê°€ ì €ì¥
    updateTotalQuantityAndPrice();
  }
  
  // ë§› ìŠ¬ë¡¯ ìƒì„± (orderData.maxFlavors ê°œìˆ˜)
  generateFlavorSlots();
  
  // ì˜µì…˜ ì„ íƒ ì˜ì—­ ì²˜ë¦¬: ì˜µì…˜ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì¼ ê²½ìš°, ê¸°ì¡´ ì„ íƒ ì˜ì—­ì€ ê°ì¶”ê³  ë³„ë„ ìˆ˜ëŸ‰ ì¡°ì ˆ ì˜ì—­(.no-option-quantity)ì„ ë³´ì´ê²Œ í•¨.
  if (selectionDiv && noOptionDiv) {
  if (isOptionSelectable()) {
    // ì»µ, ì½˜, ì™€í”Œ ë‹¤ ë³´ì„
    selectionDiv.style.display = 'flex';
    coneOption.style.display = 'flex';
    waffleOption.style.display = 'flex';
    noOptionDiv.style.display = 'none';

  } else if (isCupOnlyOption()) {
    // ì»µë§Œ ë³´ì´ê³  ì½˜/ì™€í”Œì€ ìˆ¨ê¹€
    selectionDiv.style.display = 'flex';
    coneOption.style.display = 'none';
    waffleOption.style.display = 'none';
    noOptionDiv.style.display = 'none';

  } else {
    // ì•„ë¬´ ì˜µì…˜ ì—†ìŒ â†’ ìˆ˜ëŸ‰ ì¡°ì ˆë§Œ ê°€ëŠ¥
    selectionDiv.style.display = 'none';
    noOptionDiv.style.display = 'block';
  }
}
  
  // ì´ˆê¸° í˜ì´ì§€ë„¤ì´ì…˜ í™œì„±í™” (í”Œë ˆì´ë²„ 1í˜ì´ì§€)
  const firstPageBtn = document.querySelector('.pagination button[data-page="1"]');
  if(firstPageBtn) {
    firstPageBtn.classList.add('active');
  }
});

function goBackToTestPage() {
  window.location.href = "kiosk1.html";
}

function showTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(function(tab) {
    tab.classList.remove('active');
  });
  document.getElementById(tabId).classList.add('active');

  document.getElementById("tabProduct").classList.toggle("active", tabId === "productTab");
  document.getElementById("tabFlavor").classList.toggle("active", tabId === "flavorTab");

  const cartBtn = document.querySelector(".btn-cart");

  if (tabId === "flavorTab") {
    visitedFlavorTab = true;
    cartBtn.textContent = "ë‹´ê¸°";
    cartBtn.setAttribute("onclick", "saveOrderData()");
  } else if (tabId === "productTab") {
    if (visitedFlavorTab) {
      cartBtn.textContent = "ë‹´ê¸°";
      cartBtn.setAttribute("onclick", "saveOrderData()");
    } else {
      cartBtn.textContent = "í”Œë ˆì´ë²„(ë§›) ì„ íƒ";
      cartBtn.setAttribute("onclick", "showTab('flavorTab')");
    }
  }
}




function showFlavorPanel(page) {
  document.querySelectorAll('.flavor-panel').forEach(function(panel) {
    panel.classList.remove('active');
  });
  const targetPanel = document.getElementById('flavorPanel' + page);
  if (targetPanel) {
    targetPanel.classList.add('active');
  } else {
    console.error('flavorPanel' + page + ' ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
  }
  // í˜ì´ì§€ë„¤ì´ì…˜ ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸
  document.querySelectorAll('.pagination button').forEach((btn) => {
    if (btn.getAttribute('data-page') === page.toString()) {
      btn.classList.add('active');
    } else {
      btn.classList.remove('active');
    }
  });
}

function selectFlavor(element) {
  const imgElement = element.querySelector('img');
  const flavorName = imgElement.alt;
  animateFlavorClick(imgElement);

  let slot = document.querySelector(`.flavor-slot[data-slot-index="${activeFlavorSlotIndex}"]`);


  slot.innerHTML = `
  <img src="${imgElement.src}" alt="${flavorName}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 10px;">
`;


  orderData.selectedFlavors[activeFlavorSlotIndex] = flavorName;

  let nextIndex = orderData.selectedFlavors.indexOf(null);
  if (nextIndex !== -1) {
    setActiveFlavorSlot(nextIndex);
  }
}


function animateFlavorClick(imgElement) {
  // .flavor-zoom-anim í´ë˜ìŠ¤ë¥¼ ì¶”ê°€
  imgElement.classList.add("flavor-zoom-anim");
  
  // ì•½ 300ms í›„ í´ë˜ìŠ¤ ì œê±° â†’ ì›ë˜ í¬ê¸°ë¡œ ë³µê·€
  setTimeout(function() {
    imgElement.classList.remove("flavor-zoom-anim");
  }, 300);
}


function selectOption(option) {
  // ì˜µì…˜ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì´ë©´ ì´ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì•Œë¦¼ë§Œ ë°œìƒ
  if (!isOptionSelectable()) {
    alert("ì´ ì œí’ˆì€ ì»µ, ì½˜, ì™€í”Œ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.");
    return;
  }
  console.log("ì„ íƒëœ ì˜µì…˜:", option);
  orderData.optionType = option;
}
function isOptionSelectable() {
  // ì»µ/ì½˜/ì™€í”Œ ì„ íƒ ê°€ëŠ¥í•œ ì œí’ˆ
  return ["ì‹±ê¸€ë ˆê·¤ëŸ¬", "ì‹±ê¸€í‚¹", "ë”ë¸”ì£¼ë‹ˆì–´", "ë”ë¸”ë ˆê·¤ëŸ¬"].includes(orderData.name);
}

function isCupOnlyOption() {
  // ì»µë§Œ í‘œì‹œí•  ì œí’ˆ
  return ["íŒŒì¸íŠ¸", "ì¿¼í„°", "íŒ¨ë°€ë¦¬", "í•˜í”„ê°¤ëŸ°"].includes(orderData.name);
}


function changeQuantityForOption(delta, option) {
  let spanId = "finalQuantity-" + option;
  let qtyElem = document.getElementById(spanId);
  let current = parseInt(qtyElem.textContent, 10);
  current = Math.max(0, current + delta); // ìˆ˜ëŸ‰ì€ 0ë¶€í„° ì‹œì‘
  qtyElem.textContent = current;
  
  if (option === "cup") {
    orderData.cupQuantity = current;
  } else if (option === "cone") {
    orderData.coneQuantity = current;
  } else if (option === "waffle") {
    orderData.waffleQuantity = current;
  }
  updateTotalQuantityAndPrice();
}

// ì˜µì…˜ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì˜ ê²½ìš° ìˆ˜ëŸ‰ ì¡°ì ˆ í•¨ìˆ˜
function changeProductQuantity(delta) {
  const qtySpan = document.getElementById("noOptionQuantity");
  let current = parseInt(qtySpan.textContent, 10) || 0;
  current = Math.max(0, current + delta);  // ìµœì†Œ 1ê°œ
  qtySpan.textContent = current;
  orderData.noOptionQuantity = current;
  updateTotalQuantityAndPrice();
}

function updateTotalQuantityAndPrice() {
  // ì˜µì…˜ ì„ íƒ ê°€ëŠ¥í•œ ì œí’ˆ: cup, cone, waffle ìˆ˜ëŸ‰ í•©ì‚°
  // ì˜µì…˜ ì„ íƒ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆ: noOptionQuantity ì‚¬ìš©
  if (isOptionSelectable()) {
    orderData.totalQuantity = orderData.cupQuantity + orderData.coneQuantity + orderData.waffleQuantity;
  } else {
    orderData.totalQuantity = orderData.noOptionQuantity;
  }
  
  // ì´ ê°€ê²© ê³„ì‚°
  orderData.totalPrice = orderData.totalQuantity * orderData.price;
  document.getElementById("totalPrice").textContent = orderData.totalPrice.toLocaleString('ko-KR');
}

function updateOptionButtons() {
  const buttons = document.querySelectorAll(".option-button");
  const isSelectable = isOptionSelectable();
  
  buttons.forEach(button => {
    if (isSelectable) {
      button.removeAttribute("disabled");
    } else {
      button.setAttribute("disabled", "true");
    }
  });
}

// ë§› ìŠ¬ë¡¯ ìƒì„± í•¨ìˆ˜: flavor-slots-container ë‚´ì— orderData.maxFlavors ê°œì˜ ìŠ¬ë¡¯ ìƒì„±
function generateFlavorSlots() {
  const container = document.querySelector('.flavor-slots-container');
  container.innerHTML = '';
  orderData.selectedFlavors = [];

  // ğŸ¦ ìˆ˜ëŸ‰ì´ ì•„ë‹Œ maxFlavors ê¸°ì¤€ìœ¼ë¡œ ê³ ì • ìŠ¬ë¡¯ ìƒì„±
  let slotCount = orderData.maxFlavors;

  for (let i = 0; i < slotCount; i++) {
    orderData.selectedFlavors.push(null);
    const slot = document.createElement('div');
    slot.className = 'flavor-slot';
    slot.setAttribute('data-slot-index', i);
    slot.innerHTML = '<span class="slot-placeholder">+</span>';
    slot.addEventListener('click', function(e) {
      e.stopPropagation();
      setActiveFlavorSlot(i);
    });
    container.appendChild(slot);
  }

  setActiveFlavorSlot(0); // ì²« ìŠ¬ë¡¯ ê¸°ë³¸ ì„ íƒ
}



function setActiveFlavorSlot(index) {
  activeFlavorSlotIndex = index;
  document.querySelectorAll('.flavor-slot').forEach((slot, i) => {
    if (i === index) {
      slot.classList.add('active');
    } else {
      slot.classList.remove('active');
    }
  });
}

function saveOrderData() {
  // ë§› ìŠ¬ë¡¯ ëª¨ë‘ê°€ ì„ íƒë˜ì—ˆëŠ”ì§€ í™•ì¸ (null ê°’ì´ ìˆëŠ”ì§€ ê²€ì‚¬)
  if (orderData.selectedFlavors.includes(null)) {
  alert("ë§›ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
  showTab("flavorTab"); // ğŸ‘‰ ë§› ì„ íƒ íƒ­ìœ¼ë¡œ ìë™ ì´ë™
  return;
}

  // ì˜µì…˜ ì„ íƒ ê°€ëŠ¥í•œ ì œí’ˆì˜ ê²½ìš°, ì»µ/ì½˜/ì™€í”Œ ì¤‘ í•˜ë‚˜ ì´ìƒì˜ ìˆ˜ëŸ‰ì´ 0ë³´ë‹¤ ì»¤ì•¼ í•¨.
  // ì˜µì…˜ ì„ íƒ ë¶ˆê°€ëŠ¥í•œ ì œí’ˆì€ noOptionQuantityê°€ 1 ì´ìƒì´ë©´ ë¬¸ì œ ì—†ìŒ.
  if (isOptionSelectable()) {
    if (orderData.totalQuantity === 0) {
      alert("ì»µ, ì½˜, ì™€í”Œ ì¤‘ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!");
      showTab("productTab");
      return;
    }
  } else {
    if (orderData.noOptionQuantity < 1) {
      alert("ìµœì†Œ 1ê°œ ì´ìƒ ì£¼ë¬¸í•´ì•¼ í•©ë‹ˆë‹¤.");
      return;
    }
  }
  
  console.log("ìµœì¢… ì£¼ë¬¸ ë°ì´í„°:", orderData);
  // ë‹¨ê°€(price)ë¥¼ ì´ê°€ê²©(totalPrice)ìœ¼ë¡œ ì—…ë°ì´íŠ¸
  orderData.price = orderData.totalPrice;
  
  // ê¸°ì¡´ cartOrders ë°°ì—´ì„ ë¶ˆëŸ¬ì™€ ìƒˆ ì£¼ë¬¸ ë°ì´í„°ë¥¼ ëˆ„ì 
  var cartOrders = JSON.parse(localStorage.getItem("cartOrders") || "[]");
  cartOrders.push(orderData);
  localStorage.setItem("cartOrders", JSON.stringify(cartOrders));
  
  // ì£¼ë¬¸ ì™„ë£Œ í›„ ì´ì „ í˜ì´ì§€ (ì˜ˆ: kiosk1.html)ë¡œ ì´ë™
  window.location.href = "kiosk1.html";
}
function checkBeforeFlavorTab() {
  if (isOptionSelectable()) {
    const total = orderData.cupQuantity + orderData.coneQuantity + orderData.waffleQuantity;
    if (total < 1) {
      alert("ì»µ, ì½˜, ì™€í”Œ ì¤‘ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!");
      return;
    }
  } else if (isCupOnlyOption()) {
    if (orderData.cupQuantity < 1) {
      alert("ì»µ ìˆ˜ëŸ‰ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!");
      return;
    }
  } else {
    // ì˜µì…˜ ì„ íƒ ë¶ˆê°€ëŠ¥í•œ ìƒí’ˆ (ex. ìš©ê¸°ì„ íƒ ë¶ˆê°€ ìƒí’ˆ)
    if (orderData.noOptionQuantity < 1) {
      alert("ìˆ˜ëŸ‰ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!");
      return;
    }
  }

  showTab('flavorTab');
}



  </script>
</body>
</html>
