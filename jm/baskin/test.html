<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë°°ìŠ¤í‚¨ë¼ë¹ˆìŠ¤</title>
  <link rel="stylesheet" href="common.css">
  <script src="script.js" defer></script>
  <style>
    /* pay-wrapper: ê²°ì œí•˜ê¸° ë²„íŠ¼ê³¼ ê°€ê²©ì„ í•œ ì¤„ì— í‘œì‹œ */
    .pay-wrapper {
      display: flex;
      align-items: center;
    }
    /* total-price-indicator: ë²„íŠ¼ ì˜†ì— ë°°ì¹˜ (ì˜¤ë¥¸ìª½ì— ì•½ê°„ì˜ ì—¬ë°±) */
    .total-price-indicator {
      font-size: 18px;
      font-weight: bold;
      color: #ff1493;
      margin-left: 10px;
    }
    /* ìˆ˜ì •ëœ cart-badge ìŠ¤íƒ€ì¼ */
    .cart-badge {
      position: absolute;
      top: 0;
      right: 0;
      transform: translate(50%, -50%);
      background-color: #ff1493;
      color: white;
      font-size: 14px;
      padding: 2px 6px;
      border-radius: 50%;
      min-width: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- í—¤ë” ë™ì  ì‚½ì… -->
    <div id="header-container">
      <header class="header">
        <img src="./baskin.png" alt="ë°°ìŠ¤í‚¨ë¼ë¹ˆìŠ¤ ë¡œê³ ">
        <button class="close-btn">X</button>
      </header>
    </div>

    <main class="content">
      <nav class="nav">
        <button class="ice-btn">ì•„ì´ìŠ¤í¬ë¦¼</button>
        <a href="#coffee.html">ì»¤í”¼</a>
        <a href="#drink.html">ìŒë£Œ</a>
        <a href="#mocchi.html">ì•„ì´ìŠ¤ëª¨ì°Œ</a>
      </nav>

      <!-- ìƒí’ˆ ëª©ë¡ -->
      <section class="product-list">
        <div class="product">
          <img src="./single1.png" alt="ì‹±ê¸€ë ˆê·¤ëŸ¬">
          <p>ì‹±ê¸€ë ˆê·¤ëŸ¬</p>
          <p class="price">â‚©3,200</p>
        </div>
        <div class="product">
          <img src="./single2.png" alt="ì‹±ê¸€í‚¹">
          <p>ì‹±ê¸€í‚¹</p>
          <p class="price">â‚©4,000</p>
        </div>
        <div class="product">
          <img src="./double1.png" alt="ë”ë¸”ì£¼ë‹ˆì–´">
          <p>ë”ë¸”ì£¼ë‹ˆì–´</p>
          <p class="price">â‚©4,300</p>
        </div>
        <div class="product">
          <img src="./double2.png" alt="ë”ë¸”ë ˆê·¤ëŸ¬">
          <p>ë”ë¸”ë ˆê·¤ëŸ¬</p>
          <p class="price">â‚©6,200</p>
        </div>
        <div class="product">
          <img src="./pint.png" alt="íŒŒì¸íŠ¸">
          <p>íŒŒì¸íŠ¸</p>
          <p class="price">â‚©8,200</p>
        </div>
        <div class="product">
          <img src="./quarter.png" alt="ì¿¼í„°">
          <p>ì¿¼í„°</p>
          <p class="price">â‚©15,500</p>
        </div>
        <div class="product">
          <img src="./family.png" alt="íŒ¨ë°€ë¦¬">
          <p>íŒ¨ë°€ë¦¬</p>
          <p class="price">â‚©22,000</p>
        </div>
        <div class="product">
          <img src="./half.png" alt="í•˜í”„ê°¤ëŸ°">
          <p>í•˜í”„ê°¤ëŸ°</p>
          <p class="price">â‚©26,500</p>
        </div>
      </section>
    </main>

    <!-- footer ë™ì  ì‚½ì… -->
    <div id="footer-container">
      <footer class="footer">
        <!-- ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜ê³¼ ì£¼ë¬¸ ê°œìˆ˜ í‘œì‹œ -->
        <div class="cart">
          ğŸ›’<span class="cart-badge"></span>
        </div>
        <!-- ê²°ì œí•˜ê¸° ë²„íŠ¼ê³¼ ì´ ê°€ê²© í‘œì‹œ (ë²„íŠ¼ ì˜†ì— ë°°ì¹˜) -->
        <div class="pay-wrapper">
          <button class="pay-btn">ê²°ì œí•˜ê¸° â†’</button>
          <span class="total-price-indicator"></span>
        </div>
      </footer>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì£¼ë¬¸ ë°ì´í„°(cartOrders)ë¥¼ ë¶ˆëŸ¬ì˜´ (ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´)
      let storedOrders = localStorage.getItem("cartOrders");
      let cartOrders = [];
      if (storedOrders) {
        try {
          cartOrders = JSON.parse(storedOrders);
        } catch (e) {
          console.error("Error parsing cartOrders:", e);
        }
      }

      // ì£¼ë¬¸ ë°ì´í„° ë°°ì—´ì˜ ê°œìˆ˜
      let totalOrdersCount = cartOrders.length;
      // ê° ì£¼ë¬¸ ê°ì²´ì—ì„œ totalPrice ë˜ëŠ” price ê°’ì„ í•©ì‚°í•˜ì—¬ ì´ ê°€ê²© ê³„ì‚°
      let totalPriceSum = cartOrders.reduce((sum, order) => sum + (order.totalPrice || order.price || 0), 0);

      console.log("Total Orders:", totalOrdersCount, "Total Price:", totalPriceSum);

      // 1. ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜ ì˜†ì— ì£¼ë¬¸ ë°ì´í„° ê°œìˆ˜ í‘œì‹œ
      const badge = document.querySelector(".cart-badge");
      if (badge) {
        badge.textContent = totalOrdersCount;
        badge.style.display = totalOrdersCount > 0 ? "block" : "none";
      }

      // 2. ê²°ì œí•˜ê¸° ë²„íŠ¼ ì˜†ì— ì´ ê°€ê²© í‘œì‹œ
      const priceIndicator = document.querySelector(".total-price-indicator");
      if (priceIndicator) {
        priceIndicator.textContent = "â‚©" + Number(totalPriceSum).toLocaleString('ko-KR');
      }
    });
  </script>
</body>
</html>
