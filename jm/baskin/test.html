<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배스킨라빈스</title>
    <link rel="stylesheet" href="common.css">
    <script src="script.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- 헤더 동적 삽입 -->
        <div id="header-container"></div>

        <main class="content">
            <nav class="nav">
                <button class="ice-btn">아이스크림</button>
                <a href="#coffee.html">커피</a>
                <a href="#drink.html">음료</a>
                <a href="#mocchi.html">아이스모찌</a>
            </nav>

            <!-- 상품 목록 -->
            <section class="product-list">
                <div class="product">
                    <img src="./single1.png" alt="싱글레귤러">
                    <p>싱글레귤러</p>
                    <p class="price">₩3,200</p>
                </div>
                <div class="product">
                    <img src="./single2.png" alt="싱글킹">
                    <p>싱글킹</p>
                    <p class="price">₩4,000</p>
                </div>
                <div class="product">
                    <img src="./double1.png" alt="더블주니어">
                    <p>더블주니어</p>
                    <p class="price">₩4,300</p>
                </div>
                <div class="product">
                    <img src="./double2.png" alt="더블레귤러">
                    <p>더블레귤러</p>
                    <p class="price">₩6,200</p>
                </div>
                <div class="product">
                    <img src="./pint.png" alt="파인트">
                    <p>파인트</p>
                    <p class="price">₩8,200</p>
                </div>
                <div class="product">
                    <img src="./quarter.png" alt="쿼터">
                    <p>쿼터</p>
                    <p class="price">₩15,500</p>
                </div>
                <div class="product">
                    <img src="./family.png" alt="패밀리">
                    <p>패밀리</p>
                    <p class="price">₩22,000</p>
                </div>
                <div class="product">
                    <img src="./half.png" alt="하프갤런">
                    <p>하프갤런</p>
                    <p class="price">₩26,500</p>
                </div>
            </section>
        </main>

        <!-- 푸터 동적 삽입 -->
        <div id="footer-container"></div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
          // localStorage에서 orderData 가져오기
          var orderData = JSON.parse(localStorage.getItem("orderData"));
          if (orderData) {
            // 총 수량 및 총금액 불러오기
            var totalQty = orderData.totalQuantity;
            // saveOrderData() 함수에서는 orderData.price에 총금액(totalPrice)를 덮어썼습니다.
            var totalPrice = orderData.price; // 총 금액으로 사용
        
            // 장바구니 아이콘에 뱃지 추가 (이미 .cart 요소가 존재한다고 가정)
            const cartEl = document.querySelector('.cart');
            if (cartEl) {
              // 기존 뱃지가 있으면 제거
              let existingBadge = cartEl.querySelector('.cart-badge');
              if (existingBadge) {
                existingBadge.remove();
              }
              // 뱃지 생성
              const badge = document.createElement("span");
              badge.className = "cart-badge";
              badge.textContent = totalQty;
              cartEl.appendChild(badge);
            }
        
            // 결제하기 버튼에 총 금액 표기 (₩ 한국 통화형식)
            const payBtn = document.querySelector('.pay-btn');
            if (payBtn) {
              let formattedPrice = "₩" + Number(totalPrice).toLocaleString('ko-KR');
              payBtn.textContent = `결제하기 → ${formattedPrice}`;
            }
        
            // 일정 시간 후 (예를 들어, 10초 후) localStorage 초기화 및 UI 초기화
            setTimeout(function() {
              localStorage.removeItem("orderData");
              // 장바구니 뱃지 제거
              if (cartEl && cartEl.querySelector(".cart-badge")) {
                cartEl.querySelector(".cart-badge").remove();
              }
              // 결제하기 버튼 원래 텍스트로 복원
              if (payBtn) {
                payBtn.textContent = "결제하기 →";
              }
            }, 100000); // 10,000밀리초 = 10초
          }
        });
        </script>
        
</body>
</html>
